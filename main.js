(()=>{"use strict";const e=function(e){try{localStorage.setItem("state",JSON.stringify(e))}catch(e){console.error(e)}},t={quiz:{},currQuestion:"",currOptions:[],progress:null,optionsMap:["A","B","C","D"],score:0,answers:{selected:[0,"",!1],right:[0,""],answered:!1},theme:"light"},n={...t,reset(){Object.assign(this,JSON.parse(JSON.stringify(t)))},setQuiz(e){this.quiz=e},setCurrQuestion(){this.currQuestion=this.quiz.questions[n.progress].question},setCurrOptions(e){this.currOptions=n.quiz.questions[n.progress].options},setProgress(){this.progress+=1},setScore(){this.score+=1},setRightAnswer(){this.answers.right[1]=this.quiz.questions[n.progress].answer,this.answers.right[0]=this.currOptions.findIndex((e=>e===this.getRightAnswer()))},setSelectedAnswer(e,t){this.answers.selected[0]=+e,this.answers.selected[1]=t},setAnswered(e){this.answers.answered=n.answers.selected[2]=e},setColorMode(t){return this.theme=t,e(n),this.theme},getRightAnswer(){return this.answers.right[1]}};class s{_data;render(e){if(!e)return;this._data=e;const t=this._generateMarkup();this.clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}clear(){this._parentElement.innerHTML=""}addHandlerChangeColorTheme(e){const t=document.querySelector(".toggle");t.addEventListener("change",(function(n){const s=t.checked?"dark":"light";e(s)}))}setColorTheme(e){document.querySelector(".toggle").checked="light"!==e,document.body.classList.replace(("light"===e?"dark":"light")+"-mode",`${e}-mode`)}addHandlerLoad(e){window.addEventListener("load",(function(t){e()}))}}const i=new class extends s{_parentElement=document.querySelector(".main__options");_btnElement;_optionElement;_selectedOption;_allButtons;_allOptions;_data;initElements(){this._parentElement=document.querySelector(".main__options"),this._allButtons=this._parentElement?.querySelectorAll(".selection"),this._allOptions=this._parentElement?.querySelectorAll(".selection-option")}renderError(){this._parentElement.querySelector(".error-msg").classList.toggle("selection-error--hidden")}_generateMarkup(){return`\n        ${this._data.currOptions.map(((e,t)=>`<button class="selection type-heading-s" data-option="${t}">\n        <div\n          class="selection-option selection-option--idle type-heading-s">\n          ${this._data.optionsMap[t]}\n        </div>\n        ${function(e){try{if("string"==typeof e){const t=["<",">","&"],n=["&lt;","&gt;","&amp;"];return e.split("").map((e=>-1===t.indexOf(e)?e:n[t.indexOf(e)])).join("")}return e}catch(e){}}(e)}\n      </button>`)).join()}\n       <button class="btn btn-submit type-heading-s">Submit answer</button>\n       <div class='selection-error error-msg selection-error--hidden'>\n  <img src='assets/images/icon-error.svg'>\n  <p class='type-medium'>Please select an answer</p>\n  </div>`}resetClasses(){this._allButtons.forEach((e=>e.className="selection type-heading-s")),this._allOptions.forEach((e=>e.className="selection-option selection-option--idle type-heading-s"))}toggleState(e,t){this._allButtons[e].classList.toggle(`selection--${t}`),this._allOptions[e].classList.toggle(`selection-option--${t}`)}addHandlerSelectOption(e){this._parentElement.addEventListener("click",function(t){if(this.initElements(),this._btnElement=t.target.closest(".selection"),this._optionElement=t.target.querySelector(".selection-option"),!this._btnElement||!this._optionElement)return;this._parentElement?.querySelector(".error-msg")?.classList.add("selection-error--hidden");const n=this._btnElement.dataset.option,s=this._btnElement.innerText.slice(2).trim();e(s,n)}.bind(this))}renderCorrectAnswer(e,t){const n=this._allButtons[e],s=this._allButtons[t],i=document.querySelector(".btn-submit");s.insertAdjacentHTML("beforeend",'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" class="selection-tick" fill="none" viewBox="0 0 40 40"><path fill="#26D782" d="M20 5a15 15 0 1 1 0 30 15 15 0 0 1 0-30Zm0 2.5a12.5 12.5 0 1 0 0 25 12.5 12.5 0 0 0 0-25Zm-1.875 15.105L25.3 15.41a1.25 1.25 0 0 1 1.915 1.593l-.145.174-8.06 8.08a1.25 1.25 0 0 1-1.595.148l-.175-.145-4.375-4.375a1.25 1.25 0 0 1 1.595-1.913l.175.143 3.49 3.49Z"/></svg>'),e!=t&&n.insertAdjacentHTML("beforeend",'<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" class="selection-tick" fill="none" viewBox="0 0 40 40"><path fill="#EE5454" d="M20 5a15 15 0 1 1 0 30 15 15 0 0 1 0-30Zm0 2.5a12.5 12.5 0 1 0 0 25 12.5 12.5 0 0 0 0-25Zm-5.402 7.415.142-.175a1.25 1.25 0 0 1 1.595-.143l.175.143L20 18.233l3.49-3.493a1.25 1.25 0 0 1 1.595-.143l.175.143a1.25 1.25 0 0 1 .142 1.595l-.142.175L21.767 20l3.493 3.49a1.25 1.25 0 0 1 .142 1.595l-.142.175a1.25 1.25 0 0 1-1.595.142l-.175-.142L20 21.767l-3.49 3.493a1.25 1.25 0 0 1-1.595.142l-.175-.142a1.25 1.25 0 0 1-.143-1.595l.143-.175L18.233 20l-3.493-3.49a1.25 1.25 0 0 1-.143-1.595Z"/></svg>'),this._allButtons.forEach((e=>e.classList.add("selection-disabled"))),this._data.progress<=9&&(i.innerText="Next Question",i.classList.replace("btn-submit","btn-next")),10===this._data.progress&&(i.innerText="See Final Score",i.classList.replace("btn-submit","btn-again"))}addHandlerSelectTopic(e){this._parentElement.addEventListener("click",(function(t){const n=t.target.closest(".selection");if(!n)return;const s=+n.querySelector(".selection-option").dataset.topic;(s||0===s)&&e(s)}))}addHandlerRenderSubmitAnswer(e){console.log("Adding submit answer handler"),this._parentElement.addEventListener("click",function(t){t.target.closest(".btn-submit")&&e()}.bind(this))}addHandlerNextQuestion(e){this._parentElement.addEventListener("click",(function(t){const n=t.target.closest(".btn-next")||t.target.closest(".btn-again");n&&n.addEventListener("click",(function(t){e()}))}))}},a=new class extends s{_parentElement=document.querySelector(".main__question");_data;initElements(){this._parentElement=document.querySelector(".main__question")}_generateMarkup(){return`<div class="main__question-heading">\n      <div class="main__question-sub-heading">\n            <p class="type-body-s">Question ${this._data.progress+1} of ${this._data.quiz.questions.length}</p>\n          </div>    \n            <h2 class="type-heading-m">\n              ${this._data.currQuestion}\n            </h2>\n          </div>\n          \n          <div class="main__question-progress-bar">\n            <div class="main__question-progress-bar-progress"></div>\n          </div>`}updateProgressBar(){const e=document.querySelector(".main__question-progress-bar-progress"),t=(this._data.progress+1)/this._data.quiz.questions.length*100;e.style.setProperty("width",`${t}%`)}},o=new class extends s{_parentElement=document.querySelector(".main");_data;initElements(){this._parentElement=document.querySelector(".main")}_generateMarkup(){return`<div class="main__question">\n          <div class="main__question-heading">\n            <h2 class="type-heading-l">\n            \n              <span class="type-regular">Quiz completed</span>\n              <br>\n              You scored...\n            </h2>\n          </div>\n        </div>\n        <div class="main__result">\n          <div class="main__result-heading">\n            <div class="selection-option selection-option--${this._data.quiz.title.toLowerCase()}">\n              <img\n                src="${this._data.quiz.icon}"\n                alt="${this._data.quiz.title} Icon" />\n            </div>\n            <h4 class="type-heading-s" class="main__result-heading">\n              ${this._data.quiz.title}\n            </h4>\n          </div>\n          <h1 class="type-display">${this._data.score}</h1>\n          <div class="main__result-sub-heading">\n            <p class="type-body-s">\n              out of ${this._data.quiz.questions.length}\n            </p>\n          </div>\n          <button></button>\n        </div>\n        <button class="btn main__result-btn-again type-heading-s">Play Again</button>`}addHandlerPlayAgain(e){this._parentElement.addEventListener("click",(function(t){t.target.closest(".main__result-btn-again")&&e()}))}},r=new class extends s{_parentElement=document.querySelector(".container");_data;_generateMarkup(){return'<nav class="nav">\n        <div class="nav__topic hidden">\n          <div class="selection-option selection-option--accessibility">\n            <img\n              src="assets/images/icon-accessibility.svg"\n              class="nav__topic-icon"\n              alt="" />\n          </div>\n          <h4 class="type-heading-s" class="nav__topic-heading">Topic</h4>\n        </div>\n        <div class="nav__toggle">\n          <svg\n            xmlns="http://www.w3.org/2000/svg"\n            width="24"\n            height="24"\n            fill="none"\n            viewBox="0 0 24 24">\n            <path\n              fill="#626C7F"\n              d="M12 1.5a.75.75 0 0 1 .75.75v1.5a.75.75 0 1 1-1.5 0v-1.5A.75.75 0 0 1 12 1.5Zm0 15a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9Zm0-1.5a3 3 0 1 1 0-6 3 3 0 0 1 0 6Zm9.75-2.25a.75.75 0 1 0 0-1.5h-1.5a.75.75 0 1 0 0 1.5h1.5ZM12 19.5a.75.75 0 0 1 .75.75v1.5a.75.75 0 1 1-1.5 0v-1.5a.75.75 0 0 1 .75-.75Zm-8.25-6.75a.75.75 0 1 0 0-1.5h-1.5a.75.75 0 1 0 0 1.5h1.5Zm.969-8.031a.75.75 0 0 1 1.062 0l1.5 1.5a.751.751 0 0 1-1.062 1.062l-1.5-1.5a.75.75 0 0 1 0-1.062Zm1.062 14.562a.75.75 0 1 1-1.062-1.06l1.5-1.5a.75.75 0 1 1 1.062 1.06l-1.5 1.5Zm13.5-14.562a.75.75 0 0 0-1.062 0l-1.5 1.5a.751.751 0 0 0 1.062 1.062l1.5-1.5a.75.75 0 0 0 0-1.062Zm-1.062 14.562a.75.75 0 0 0 1.062-1.06l-1.5-1.5a.75.75 0 0 0-1.062 1.06l1.5 1.5Z" />\n          </svg>\n          <input type="checkbox" name="" id="" class="toggle" />\n          <svg\n            xmlns="http://www.w3.org/2000/svg"\n            width="24"\n            height="24"\n            fill="none"\n            viewBox="0 0 24 24">\n            <path\n              fill="#626C7F"\n              d="M11.775 4.522A7.5 7.5 0 1 1 4.898 16.09c2.104-.57 4.974-1.953 6.24-5.326.828-2.211.876-4.408.637-6.241ZM20.184 12a8.997 8.997 0 0 0-9.315-8.994.75.75 0 0 0-.713.888c.345 1.821.42 4.092-.424 6.342-1.2 3.201-4.203 4.26-6.115 4.606a.75.75 0 0 0-.542 1.066A9 9 0 0 0 20.184 12Z" />\n          </svg>\n        </div>\n      </nav>\n\n      <main class="main">\n        <div class="main__question">\n          <div class="main__question-heading">\n            <h2 class="type-heading-l">\n              <span class="type-regular">Welcome to the</span> Frontend\n              Quiz!\n            </h2>\n          </div>\n          <div class="main__question-sub-heading">\n            <p class="type-body-s">Pick a subject to get started.</p>\n          </div>\n          <div class="main__question-progress-bar hidden">\n            <div class="main__question-progress-bar-progress"></div>\n          </div>\n        </div>\n        <div class="main__options">\n          <button class="selection type-heading-s">\n            <div\n              data-topic="0"\n              class="selection-option selection-option--html type-heading-s">\n              <img src="assets/images/icon-html.svg" alt="" />\n            </div>\n            HTML\n          </button>\n          <button class="selection type-heading-s">\n            <div\n              data-topic="1"\n              class="selection-option selection-option--css type-heading-s">\n              <img src="assets/images/icon-css.svg" alt="" />\n            </div>\n            CSS\n          </button>\n          <button class="selection type-heading-s">\n            <div\n              data-topic="2"\n              class="selection-option selection-option--js type-heading-s">\n              <img src="assets/images/icon-js.svg" alt="" />\n            </div>\n            Javascript\n          </button>\n          <button class="selection type-heading-s">\n            <div\n              data-topic="3"\n              class="selection-option selection-option--accessibility type-heading-s">\n              <img src="assets/images/icon-accessibility.svg" alt="" />\n            </div>\n            Accessibility\n          </button>\n        </div>\n      </main>\n     '}},l=new class extends s{_parentElement=document.querySelector(".nav__topic");_data;_generateMarkup(){return console.log(this._data),`\n      <div class="selection-option selection-option--${this._data.quiz.title.toLowerCase()}">\n            <img\n              src=${this._data.quiz.icon}\n              class="nav__topic-icon"\n              alt="${this._data.quiz.title} icon" />\n          </div>\n          <h4 class="type-heading-s" class="nav__topic-heading">${this._data.quiz.title}</h4>`}},c=new s,d=async function(e){try{await async function(e){const{quizzes:t}=await async function(){try{const e=await fetch("../data.json");return await e.json()}catch(e){}}();n.setQuiz(t[e])}(+e),n.progress=0,h(n.progress),l.render(n)}catch(e){console.error(e)}},h=function(){try{if(null===n.progress)return;if(n.progress===n.quiz.questions.length)return void u();n.setCurrQuestion(),n.setCurrOptions(),n.setAnswered(!1),e(n),a.render(n),a.updateProgressBar(n),i.render(n)}catch(e){console.error(e)}},u=function(){try{o.render(n)}catch(e){console.error(e)}},g=function(){const t=n.answers;if(!t.answered){if(!t.selected[2])return console.log("calling render error"),void i.renderError();n.setRightAnswer(),n.setProgress(),n.setAnswered(!0),e(n),n.getRightAnswer()===n.answers.selected[1]&&(n.setScore(),1)?(i.resetClasses(),i.toggleState(t.selected[0],"picked-correct")):(i.resetClasses(),i.toggleState(t.selected[0],"picked-incorrect"),i.toggleState(t.right[0],"picked-correct")),i.renderCorrectAnswer(t.selected[0],t.right[0])}},p=function(e,t){null===n.progress||n.answers.answered||(n.answers.selected[2]=!0,i.resetClasses(),n.setSelectedAnswer(t,e),i.toggleState(t,"active"))},m=function(){n.answers.answered&&h()},_=function(e=n.theme){n.setColorMode(e),c.setColorTheme(e)},v=function(){!function(e){try{const t=JSON.parse(localStorage.getItem("state"));if(!t)return;Object.assign(e,t)}catch(e){console.error(e)}}(n),h(),_()},w=function(){n.reset(),localStorage.clear(),r.render(n),i.initElements(),a.initElements(),o.initElements(),y(),console.log(n)},y=function(){c.addHandlerLoad(v),i.addHandlerSelectTopic(d),i.addHandlerSelectOption(p),i.addHandlerRenderSubmitAnswer(g),i.addHandlerNextQuestion(m),c.addHandlerChangeColorTheme(_),o.addHandlerPlayAgain(w)};y()})();